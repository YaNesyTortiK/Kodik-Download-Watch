{% extends "base.html" %}

{% block title %}Быстрая загрузка: {{ seria_num }}{% endblock %}

{% block content %}
<div class="fade-in" style="max-width: 600px; margin: 100px auto; text-align: center;">
    <div class="glass-card" style="padding: 40px;">
        <div class="loader-ring" style="margin-bottom: 30px;">
            <!-- Simple CSS Loader could be added here if needed, or just text -->
            <div style="font-size: 3rem; margin-bottom: 10px;">⏳</div>
        </div>
        
        <h1 style="margin-bottom: 20px;">Пожалуйста, подождите</h1>
        <p style="margin-bottom: 30px; color: var(--text-muted);">
            Выполняется предзагрузка серии <b>№{{ seria_num }}</b>. 
            Скачивание начнется автоматически.
        </p>
        
        <div style="background: var(--primary-glow); padding: 15px; border-radius: 12px; margin-bottom: 30px; font-size: 0.9rem;">
            Процесс занимает 20-30 сек для серии и 2-3 мин для фильма. 
            Если возникнет ошибка времени ожидания — перезагрузите страницу.
        </p>
        
        <button class="btn-modern btn-secondary" onclick="window.location.replace(past_url)">
            Вернуться назад
        </button>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    const past_url = "{{ past_url }}";
    // Даем небольшую задержку перед переходом, чтобы пользователь успел прочитать
    setTimeout(() => {
        window.location.replace('{{ url }}');
    }, 1000);
</script>
{% endblock %}