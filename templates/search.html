{% extends "base.html" %}

{% block title %}Результаты поиска{% endblock %}

{% block content %}
<div style="margin-top: 40px; margin-bottom: 60px;">
    <h1 style="margin-bottom: 30px;">Результаты <span style="color: var(--primary-color);">поиска</span></h1>
    
    <div class="glass-card" style="padding: 20px; margin-bottom: 60px;">
        <form method="POST" novalidate action="/">
            <div style="display: flex; gap: 15px;">
                <input class="search-input-modern" name="kdk" placeholder="Искать аниме..." required autocomplete="off">
                <button type="submit" class="btn-modern">Поиск</button>
            </div>
        </form>
    </div>

    {% if items %}
    <h2 style="margin-bottom: 30px; font-size: 1.5rem;">Аниме:</h2>
    <div class="search-results-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 20px;">
        {% for item in items %}
        <a href="/download/sh/{{ item.id }}/" class="glass-card search-card fade-in" style="display: flex; gap: 20px; overflow: hidden; height: 180px;">
            <img src="{{ item.image }}" style="width: 120px; height: 100%; object-fit: cover; border-right: 1px solid var(--surface-glass-border);" loading="lazy">
            <div style="padding: 20px; display: flex; flex-direction: column; justify-content: center; overflow: hidden;">
                <h3 style="font-size: 1.1rem; margin-bottom: 10px; color: var(--text-main); white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">{{ item.title }}</h3>
                <div style="font-size: 0.85rem; color: var(--text-muted); line-height: 1.4;">
                    <p>Тип: {{ item.type }}</p>
                    <p>Статус: {{ item.status }}</p>
                    <p>Даты: {{ item.date }}</p>
                </div>
            </div>
        </a>
        {% endfor %}
    </div>
    {% else %}
    <div class="glass-card" style="padding: 40px; text-align: center;">
        <h3 style="color: var(--text-muted);">По вашему запросу ничего не найдено</h3>
    </div>
    {% endif %}

    {% if others %}
    <div style="margin-top: 60px;">
        <h2 style="margin-bottom: 30px; font-size: 1.5rem;">Прочее:</h2>
        <div class="others-list" style="display: grid; gap: 10px;">
            {% for item in others %}
            <a href="/download/kp/{{ item.id }}/" class="glass-card" style="padding: 15px 25px; display: block;">
                <span style="color: var(--text-muted); margin-right: 10px;">{{ item.type }}</span>
                <span style="font-weight: 500;">{{ item.title }}</span>
                <span style="float: right; color: var(--text-muted); font-size: 0.9rem;">{{ item.date }}</span>
            </a>
            {% endfor %}
        </div>
    </div>
    {% endif %}
</div>

<style>
    .search-card {
        transition: var(--transition-smooth);
    }
    .search-card:hover {
        transform: scale(1.02);
        border-color: var(--primary-color);
        box-shadow: 0 10px 30px rgba(0,0,0,0.4);
    }
</style>
{% endblock %}